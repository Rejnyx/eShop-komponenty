<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>eShop Komponenty - Demo</title>

  <!-- Reset & Design Tokens -->
  <link rel="stylesheet" href="src/styles/reset.css">
  <link rel="stylesheet" href="src/tokens/tokens.css">

  <!-- Component Styles -->
  <link rel="stylesheet" href="src/components/Button/Button.css">
  <link rel="stylesheet" href="src/components/Input/Input.css">
  <link rel="stylesheet" href="src/components/Checkbox/Checkbox.css">
  <link rel="stylesheet" href="src/components/DatePicker/DatePicker.css">
  <link rel="stylesheet" href="src/components/TagSelector/TagSelector.css">
  <link rel="stylesheet" href="src/components/Badge/Badge.css">
  <link rel="stylesheet" href="src/components/AccountCard/AccountCard.css">
  <link rel="stylesheet" href="src/components/AccountCard/AddressSelector.css">
  <link rel="stylesheet" href="src/components/EditProfileModal/EditProfileModal.css">

  <style>
    body {
      font-family: var(--font-family);
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: var(--spacing-lg);
    }

    .demo-container {
      text-align: center;
      color: white;
    }

    .demo-title {
      font-size: 48px;
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--spacing-md);
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }

    .demo-subtitle {
      font-size: var(--font-size-lg);
      margin-bottom: var(--spacing-xl);
      opacity: 0.9;
    }

    .demo-button {
      background: white;
      color: #667eea;
      border: none;
      border-radius: var(--radius-full);
      padding: var(--spacing-lg) var(--spacing-xl);
      font-size: var(--font-size-md);
      font-weight: var(--font-weight-bold);
      cursor: pointer;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
      transition: all var(--transition-normal);
    }

    .demo-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.3);
    }

    .demo-button:active {
      transform: translateY(0);
    }

    /* Right Modal Animation for AccountCard */
    .account-card-overlay--right {
      justify-content: flex-end;
      padding: 0;
    }

    .account-card-overlay--right .account-card {
      max-width: 480px;
      width: 100%;
      height: 100vh;
      max-height: 100vh;
      border-radius: 0;
      margin: 0;
      animation: slideInRight 0.3s ease-out;
      overflow-y: auto;
    }

    @keyframes slideInRight {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* Smooth fade for EditProfileModal */
    .edit-profile-modal-overlay {
      animation: fadeIn 0.2s ease-out;
    }

    .edit-profile-modal {
      animation: scaleIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes scaleIn {
      from {
        transform: scale(0.9);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    @media (max-width: 768px) {
      .demo-title {
        font-size: 32px;
      }

      .account-card-overlay--right .account-card {
        max-width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="demo-container">
    <h1 class="demo-title">eShop Komponenty</h1>
    <p class="demo-subtitle">Moderní komponenty s design systémem</p>
    <button class="demo-button" id="openAccountCard">
      Otevřít můj účet →
    </button>
  </div>

  <script type="module">
    import { createAccountCard } from './src/components/AccountCard/AccountCard.js';
    import { createEditProfileModal } from './src/components/EditProfileModal/EditProfileModal.js';

    // Sample data
    const profileData = {
      avatar: 'https://i.pravatar.cc/150?img=12',
      name: 'Adam Zdravý',
      verified: true,
      premium: true,
      badges: ['favorite', 'vip'],
      vip: {
        cashback: '15% sleva',
        points: '+10 b.',
      },
    };

    const addresses = [
      {
        id: '1',
        type: 'home',
        label: 'Domov',
        address: 'Křižíkova 1234/56, 186 00 Praha 8',
        isDefault: true,
      },
      {
        id: '2',
        type: 'work',
        label: 'Práce',
        address: 'Na Příkopě 12, 110 00 Praha 1',
        isDefault: false,
      },
      {
        id: '3',
        type: 'school',
        label: 'Škola',
        address: 'Karlovo náměstí 13, 120 00 Praha 2',
        isDefault: false,
      },
    ];

    const formData = {
      firstName: 'Adam',
      lastName: 'Zdravý',
      birthDate: '1990-05-15',
      phone: '+420 123 456 789',
      email: 'adam.zdravy@email.cz',
      tags: ['vegetarian', 'favorite'],
      newsletter: true,
    };

    let currentAccountCard = null;
    let currentEditModal = null;

    // Open AccountCard
    document.getElementById('openAccountCard').addEventListener('click', () => {
      // Close existing if any
      if (currentAccountCard) {
        currentAccountCard.remove();
      }

      currentAccountCard = createAccountCard({
        profile: profileData,
        addresses: addresses,
        onClose: () => {
          currentAccountCard.remove();
          currentAccountCard = null;
        },
        onAddressChange: (addressId) => {
          console.log('Selected address:', addressId);
        },
        onEditProfile: () => {
          console.log('Opening edit profile modal...');
          openEditProfileModal();
        },
        onAddAddress: () => {
          console.log('Add new address');
          alert('Funkce "Přidat novou adresu" - zatím v demoverzi');
        },
        onMenuClick: (menuId) => {
          console.log('Menu clicked:', menuId);
          alert(`Kliknuto na menu: ${menuId}`);
        },
      });

      // Add right modal class
      currentAccountCard.classList.add('account-card-overlay--right');

      document.body.appendChild(currentAccountCard);
    });

    // Open EditProfileModal
    function openEditProfileModal() {
      // Close existing if any
      if (currentEditModal) {
        currentEditModal.remove();
      }

      currentEditModal = createEditProfileModal({
        profile: profileData,
        formData: formData,
        onClose: () => {
          currentEditModal.remove();
          currentEditModal = null;
        },
        onSave: (updatedFormData) => {
          console.log('Saving form data:', updatedFormData);

          // Update formData
          Object.assign(formData, updatedFormData);

          // Close modal
          currentEditModal.remove();
          currentEditModal = null;

          // Show success message
          alert('Profil byl úspěšně uložen! ✅');
        },
      });

      document.body.appendChild(currentEditModal);
    }

    // ESC key closes modals
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (currentEditModal) {
          currentEditModal.remove();
          currentEditModal = null;
        } else if (currentAccountCard) {
          currentAccountCard.remove();
          currentAccountCard = null;
        }
      }
    });
  </script>
</body>
</html>
